{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/App.ts","webpack:///./src/js/Ctx.ts","webpack:///./src/js/Flappy.ts","webpack:///./src/js/Game.ts","webpack:///./src/js/NeuralNet.ts","webpack:///./src/js/Resource.ts"],"names":["createGame","TextPosition","Ctx","constructor","options","w","h","size","_queue","showFps","text","textCoordinates","TopLeft","Middle","init","loop","canvas","document","createElement","width","height","ctx","body","appendChild","getContext","font","queueText","fps","toFixed","now","req","requestAnimationFrame","time","clearRect","filter","alive","forEach","func","queue","push","i","findIndex","v","console","error","splice","position","remove","padv","padh","fillText","PIPE_GAP","PIPE_SPEED","BIRD_AMOUNT","BIRD_GRAVITY","BIRD_FORCE","Movable","x","y","vY","vX","collides","pos","Bird","g","force","dead","dims","Resources","bird","dimensions","pipes","Dimensions","some","pipe","jump","draw","Math","PI","Pipe","padding","pipeTop","top","bottom","pipeBottom","Flappy","params","birds","birdAmount","score","net","setInterval","bind","render","addEventListener","event","e","code","length","Array","map","random","Resource","background","files","Object","entries","loadedFiles","loading","load","then","Promise","all","NeuralNet","file","loaded","img","Image","src","didLoad","res","rej","onload","value","status","onerror","err","angle","warn","_x","_y","save","translate","rotate","drawImage","restore"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/App.ts\");\n","import { createGame } from \"./Game\";\n\ncreateGame();","\nexport enum TextPosition {\n    TopLeft,\n    Middle\n};\n\nexport interface CtxOptions {\n    w?: number,\n    h?: number,\n    size?: number,\n    showFps?: boolean,\n};\n\nexport type RenderFunction = (ctx: CanvasRenderingContext2D) => void;\nexport type RenderTextFunction = () => string;\nexport type RemoveRenderFunction = () => void;\nexport type AliveFunction = () => boolean;\n\nexport default class Ctx {\n    private w: number = 500;\n    private h: number = 500;\n    private size: number = 24; // font size\n\n    private canvas: HTMLCanvasElement;\n    private ctx: CanvasRenderingContext2D;\n\n    private _queue: {\n        func: RenderFunction,\n        alive: AliveFunction\n    }[] = [];\n\n    private fps: number;\n    private options: CtxOptions = {\n        showFps: false\n    };\n\n    private text: {\n        [position in TextPosition]?: RenderTextFunction[]\n    } = {};\n\n    private textCoordinates: {\n        [position in TextPosition]: () => [number, number, number, number] // w, h, padding-vertical, padding-horizontal\n    } = {\n        [TextPosition.TopLeft]: () => [0, 0, this.size / 2, this.size / 2],\n        [TextPosition.Middle]: () => [this.w / 2, this.h / 2, this.size / 2, 0],\n    };\n\n    constructor(options: CtxOptions = {}) {\n        this.options = options;\n        this.w = options.w || this.w;\n        this.h = options.h || this.h;\n        this.size = options.size || this.size;\n\n        this.options = {...options, ...this.options};\n\n        this.init();\n        this.loop();\n    }\n\n    private init() {\n        this.canvas = document.createElement('canvas');\n        this.canvas.width = this.w;\n        this.canvas.height = this.h;\n\n        this.ctx = document.body.appendChild(this.canvas).getContext('2d');\n        this.ctx.font = `${this.size}px Arial`;\n\n        this.queueText(() => `Fps: ${this.fps.toFixed(1)}`, () => this.options.showFps);\n    }\n\n    private loop(): void {\n        let now;\n        const req = () => requestAnimationFrame(time => {\n            this.fps = 1e3 / (time - now);\n            this.ctx.clearRect(0, 0, this.w, this.h);\n            this._queue.filter(({alive}) => alive())\n                .forEach(({func}) => func(this.ctx));\n\n            now = time;\n            req();\n        });\n        req();\n    }\n\n    public queue(func: RenderFunction, alive: AliveFunction): RemoveRenderFunction {\n        this._queue.push({ func, alive });\n        return () => {\n            const i = this._queue.findIndex(v => v.func == func);\n            if(i == -1)\n                console.error(`Failed to remove render function`, func, alive);\n            else\n                this._queue.splice(i, 1);\n        };\n    }\n\n    public queueText(text: RenderTextFunction, alive: AliveFunction, position: TextPosition = TextPosition.TopLeft): RemoveRenderFunction {\n        if(!this.text[position]) this.text[position] = [];\n        this.text[position].push(text);\n\n        const remove = this.queue(ctx => {\n            const i = this.text[position].findIndex(v => v == text);\n\n            const [w, h, padv, padh] = this.textCoordinates[position]();\n            ctx.fillText(text(), w + padh, h + (i + 1) * (this.size + padv));\n        }, alive);\n\n        return () => {\n            remove();\n        };\n    }\n}","import NeuralNet from \"./NeuralNet\";\nimport Ctx from \"./Ctx\";\nimport { Resources, Dimensions } from './Game';\n\nconst PIPE_GAP = 100;\nconst PIPE_SPEED = -3;\nconst BIRD_AMOUNT = 50;\nconst BIRD_GRAVITY = 0.25;\nconst BIRD_FORCE = -6;\n\nexport interface FlappyParams {\n    net: NeuralNet,\n    ctx: Ctx\n};\n\nclass Movable {\n    public x: number;\n    public y: number;\n    public w: number;\n    public h: number;\n\n    public vY: number = 0;\n    public vX: number = 0;\n\n    constructor(x, y, w, h) {\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n    }\n\n    public loop() {\n        this.y += this.vY;\n        this.x += this.vX;\n    }\n\n    public collides(pos: Movable): boolean {\n        return !(pos.x > this.x + this.w\n            || pos.x + pos.w < this.x\n            || pos.y > this.y + this.h\n            || pos.y + pos.h < this.y);\n    }\n}\n\nclass Bird {\n    private pos: Movable;\n    private force: number;\n    private g: number;\n\n    public dead: boolean = false;\n    \n    constructor(x, y, g, force) {\n        const dims = Resources.bird.dimensions();\n        this.pos = new Movable(x, y, dims[0], dims[1]);\n        this.g = g;\n        this.force = force;\n    }\n\n    public loop(pipes: Pipe[]): void {\n        if(this.pos.y > Dimensions[1] || this.pos.y < 0) this.dead = true;\n        if(pipes.some(pipe => pipe.collides(this.pos))) this.dead = true;\n\n        if(this.dead) return;\n\n        this.pos.vY += this.g;\n        this.pos.loop();\n    }\n\n    public jump(): void {\n        this.pos.vY = this.force;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D): void {\n        Resources.bird.draw(ctx, this.pos.x, this.pos.y, null, null, Math.PI/2 * this.pos.vY/20);\n    }\n}\n\nclass Pipe {\n    private h: number;\n    private padding: number = PIPE_GAP;\n\n    private top: Movable;\n    private bottom: Movable;\n\n    public dead: boolean = false;\n\n    constructor(x, h, vX) {\n        const dims = Resources.pipeTop.dimensions();\n\n        this.top = new Movable(x, h - dims[1], dims[0], dims[1]);\n        this.bottom = new Movable(x, h + this.padding, dims[0], dims[1]);\n        this.top.vX = vX;\n        this.bottom.vX = vX;\n        this.h = h;\n    }\n\n    public loop() {\n        if(this.top.x + Resources.pipeTop.dimensions()[0] < 0) this.dead = true;\n        this.top.loop();\n        this.bottom.loop();\n    }\n\n    public draw(ctx: CanvasRenderingContext2D) {\n        Resources.pipeTop.draw(ctx, this.top.x, this.h - Resources.pipeTop.dimensions()[1]);\n        Resources.pipeBottom.draw(ctx, this.bottom.x, this.h + this.padding);\n        // ctx.fillRect(this.pos.x, this.h, Resources.pipeTop.dimensions()[0], this.padding);\n    }\n\n    public collides(pos: Movable): boolean {\n        return this.top.collides(pos) || this.bottom.collides(pos);\n    }\n}\n\nexport default class Flappy {\n    private ctx: Ctx;\n    private net: NeuralNet;\n\n    private birds: Bird[] = [];\n    private birdAmount: number = BIRD_AMOUNT;\n\n    private pipes: Pipe[] = [];\n\n    private score: number = 0;\n\n    constructor(params: FlappyParams) {\n        this.ctx = params.ctx;\n        this.net = params.net;\n        this.init();\n    }\n\n    private init(): void {\n        setInterval(this.loop.bind(this), 1e3/60);\n        this.ctx.queue(this.render.bind(this), () => true);\n\n        this.ctx.queueText(() => `Score: ${this.score}`, () => true);\n\n        document.addEventListener('keydown', this.event.bind(this));\n    }\n\n    private event(e: KeyboardEvent) {\n        if(e.code == 'Space') {\n            this.birds[0].jump();\n        }\n    }\n\n    private loop() {\n        this.birds = this.birds.filter(({ dead }) => !dead);\n        this.pipes = this.pipes.filter(({ dead }) => !dead);\n\n        if(this.birds.length <= 0) {\n            this.pipes = [];\n            this.score = 0;\n\n            this.birds = [...Array(this.birdAmount)]\n                .map(() => new Bird(50, Dimensions[1] / 2, BIRD_GRAVITY, BIRD_FORCE));\n        }\n\n        if(this.pipes.length <= 0) {\n            this.pipes = [...Array(1)]\n                .map(() => new Pipe(Dimensions[0], Math.random() * (Dimensions[1] - PIPE_GAP * 2) + PIPE_GAP, PIPE_SPEED));\n        }\n\n        this.birds.forEach(bird => bird.loop(this.pipes));\n        this.pipes.forEach(pipe => pipe.loop());\n\n        this.score++;\n    }\n\n    private render(ctx: CanvasRenderingContext2D) {\n        this.birds.forEach(bird => bird.draw(ctx));\n        this.pipes.forEach(pipe => pipe.draw(ctx));\n    }\n}","import Flappy from \"./Flappy\";\nimport NeuralNet from \"./NeuralNet\";\nimport Resource from \"./Resource\";\nimport Ctx, { TextPosition } from \"./Ctx\";\n\nexport const Resources = {\n    pipeBottom: new Resource('./static/pipebottom.png'),\n    pipeTop: new Resource('./static/pipetop.png'),\n    bird: new Resource('./static/bird.png'),\n    background: new Resource('./static/background.png')\n};\n\nexport const Dimensions = [300, 500];\n\nexport const createGame = async () => {\n    const ctx = new Ctx({\n        showFps: true,\n        w: Dimensions[0],\n        h: Dimensions[1]\n    });\n\n    const files = Object.entries(Resources);\n    let loadedFiles = 0;\n\n    const loading = files.map(([,v]) => v.load());\n    loading.forEach(v => v.then(() => loadedFiles++));\n\n    const remove = [\n        ctx.queueText(() => `Loading...`, () => true, TextPosition.Middle),\n        ctx.queueText(() => `${loadedFiles}/${files.length}`, () => true, TextPosition.Middle)\n    ]\n\n    await Promise.all(loading);\n    remove.forEach(v => v());\n\n    return new Flappy({\n        net: new NeuralNet(),\n        ctx\n    });\n}","\n\nexport default class NeuralNet {\n    \n}","import { Dimensions } from \"./Game\";\n\nexport interface LoadStatus {\n    status: string,\n    value?: any\n};\n\nexport default class Resource {\n    private img: HTMLImageElement;\n    private loaded: boolean = false;\n    private didLoad: Promise<LoadStatus>;\n\n    constructor(file: string) {\n        this.init(file);\n    }\n\n    private async init(file: string) {\n        this.img = new Image();\n        this.img.src = file;\n        this.didLoad = new Promise((res, rej) => {\n            this.img.onload = value => res({\n                status: 'success',\n                value\n            });\n            this.img.onerror = err => res({\n                status: 'error',\n                value: err\n            });\n        })\n        await this.didLoad;\n        this.loaded = true;\n    }\n\n    public load(): Promise<LoadStatus> {\n        return this.didLoad;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D, x: number, y: number, w?: number, h?: number, angle?: number) {\n        if(!this.loaded) {\n            console.warn('Image tried to draw when not loaded', this.img.src);\n            return;\n        }\n\n        let _x = x;\n        let _y = y;\n\n        if(angle) {\n            ctx.save();\n            ctx.translate(x + this.img.width / 2, y + this.img.height / 2);\n            ctx.rotate(angle);\n\n            _x = -this.img.width / 2;\n            _y = -this.img.height / 2;\n        }\n\n        if(w && h) ctx.drawImage(this.img, _x, _y, w, h);\n        else ctx.drawImage(this.img, _x, _y);\n\n        if(angle)\n            ctx.restore();\n    }\n\n    public dimensions(): [number, number] {\n        if(!this.loaded) {\n            console.warn('Image tried to get dimensions when not loaded', this.img.src);\n            return;\n        }\n        return [this.img.width, this.img.height];\n    }\n}"],"sourceRoot":""}